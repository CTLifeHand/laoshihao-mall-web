webpackJsonp([28],{"+BTi":function(e,t){},"+Rdb":function(e,t){},"5W1q":function(e,t){},BS1r:function(e,t){},GXEp:function(e,t){},M2Fg:function(e,t){},NHnr:function(e,t,n){"use strict";function a(e){n("BS1r")}function o(e){n("Oqem")}function i(e){n("M2Fg")}function r(e){n("vxhC")}function c(){return ke.a.create()({method:"POST",headers:{"Content-Type":"application/json"},url:ye,auth:{username:"lshao-client-uac",password:"lshaoClientSecret"},data:{refreshToken:ot.getters.getRefreshToken,accessToken:ot.getters.getAccessToken}})}function s(){window.location.href="http://login.lshao.cn/login"}function u(){var e=ot.getters.getAuthToken;if(console.info("mall-authToken: ",e),e&&e.access_token&&!e.mergeCartFlag){var t={};t.cartProductVoList=we.get(Ie.a.CART.SHOPPING_CART)?JSON.parse(we.get(Ie.a.CART.SHOPPING_CART)):[],ke()({method:"post",url:"/uac/cart/mergeUserCart",data:t}).then(function(t){e.mergeCartFlag=!0,ot.dispatch("update_user_info",e.loginName),ot.dispatch("set_cart_list",t.result.cartProductVoList),ot.dispatch("update_auth_token",e)}).catch(function(e){console.log(e)})}}Object.defineProperty(t,"__esModule",{value:!0});var l=n("fZjL"),d=n.n(l),h=n("//Fk"),p=n.n(h),f=(n("cwe7"),n("2X9z")),m=n.n(f),v=(n("oq7i"),n("+TD8")),_=n.n(v),g=(n("jZDA"),n("91Nw")),k=n.n(g),E=(n("d7TW"),n("ajQY")),T=n.n(E),C=(n("jAzQ"),n("wOhx")),y=n.n(C),R=(n("+Rdb"),n("Mezo")),S=n.n(R),U=(n("qunJ"),n("vqwl")),P=n.n(U),A=(n("GXEp"),n("mtrD")),N=n.n(A),I=(n("Yq4J"),n("qubY")),b=n.n(I),M=(n("X+ky"),n("+BTi"),n("HJMx")),L=n.n(M),w=n("7+uW"),O={created:function(){navigator.geolocation&&(console.log("h5 定位中"),navigator.geolocation.getCurrentPosition(function(e){e.coords.latitude,e.coords.longitude;console.log("h5定位成功；")},function(e){console.log("h5定失败；")}))},data:function(){return{isShowCity:!1,city:"东莞"}},methods:{change:function(e){this.city=e,this.isShowCity=!this.isShowCity}},computed:{loginName:function(){return this.$store.getters.getLoginName},cartList:function(){return this.$store.getters.getCartList}}},H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nav"},[n("div",{staticClass:"w"},[n("div",{staticClass:"user-info"},[n("span",{staticClass:"user"},[n("span",[e._v(e._s(e.city))]),e._v(" "),n("span",{staticClass:"link",on:{click:function(t){e.change(e.city)}}},[e._v("[切换城市]")]),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.isShowCity,expression:"isShowCity"}],staticStyle:{"background-color":"gray"}},[n("li",{staticClass:"link city",on:{click:function(t){e.change("北京")}}},[e._v("北京")]),e._v(" "),n("li",{staticClass:"link city",on:{click:function(t){e.change("上海")}}},[e._v("上海")]),e._v(" "),n("li",{staticClass:"link city",on:{click:function(t){e.change("广州")}}},[e._v("广州")]),e._v(" "),n("li",{staticClass:"link city",on:{click:function(t){e.change("东莞")}}},[e._v("东莞")]),e._v(" "),n("li",{staticClass:"link city",on:{click:function(t){e.change("广西")}}},[e._v("广西")])])])]),e._v(" "),n("ul",{staticClass:"nav-list"},[null==e.loginName||""===e.loginName?n("li",{staticClass:"nav-item register"},[n("a",{staticClass:"link",attrs:{href:"javascript:void(0)"},on:{click:e.goSignUp}},[e._v("注册有礼")])]):e._e(),e._v(" "),null==e.loginName||""===e.loginName?n("li",{staticClass:"nav-item"},[n("span",{staticClass:"shu"},[e._v("|")]),e._v(" "),n("a",{staticClass:"link",attrs:{href:"javascript:void(0)"},on:{click:e.goSignIn}},[e._v("登录")])]):e._e(),e._v(" "),null!=e.loginName||""!==e.loginName?n("li",{staticClass:"nav-item"},[e._v("\n        "+e._s(e.loginName)+"\n      ")]):e._e(),e._v(" "),null!=e.loginName?n("li",{staticClass:"nav-item"},[n("span",{staticClass:"shu"},[e._v("|")]),e._v(" "),n("a",{staticClass:"link",attrs:{href:"javascript:void(0)"},on:{click:function(t){return t.preventDefault(),e.logout(t)}}},[e._v("退出")])]):e._e(),e._v(" "),n("li",{staticClass:"nav-item"},[n("span",{staticClass:"shu"},[e._v("|")]),e._v(" "),n("a",{staticClass:"link",attrs:{href:"javascript:void(0)"},on:{click:function(t){t.preventDefault(),e.loadPage("user-order")}}},[e._v("我的订单")])]),e._v(" "),n("li",{staticClass:"nav-item"},[n("span",{staticClass:"shu"},[e._v("|")]),e._v(" "),n("a",{staticClass:"link",attrs:{href:"javascript:void(0)"},on:{click:function(t){t.preventDefault(),e.loadPage("user-center")}}},[e._v("我的中心")])])])])])},x=[],D={render:H,staticRenderFns:x},q=D,K=n("VU/8"),$=a,B=K(O,q,!1,$,null,null),j=B.exports,G={mounted:function(){var e=this;this.ajax({type:"GET",url:"/uac/auth/hotSearch",success:function(t){200===t.code&&(e.hotSearchData=t.result)}})},data:function(){return{searchInfo:"",hotSearchData:["初三数学","初一英语","初二英语","热门课程"]}},components:{pcNav:j},methods:{goGoodsListPage:function(e){var t={};t.keyword=e,console.info(this.$route),"goods-list"===this.$route.name?(console.info("emit searchProduct"),this.loadPage("goods-list",t),this.$pcBus.$emit("searchProduct")):this.loadPage("goods-list",t)}}},F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("pc-nav"),e._v(" "),n("div",{staticClass:"header"},[n("div",{staticClass:"w"},[n("img",{staticClass:"link",staticStyle:{top:"27px",position:"relative"},attrs:{src:"http://oss.lshao.cn/images/Logo.png",alt:""},on:{click:function(t){return t.preventDefault(),e.goHome(t)}}}),e._v(" "),n("div",{staticClass:"search-con"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInfo,expression:"searchInfo"}],staticClass:"search-input",attrs:{id:"search-input",placeholder:"请输入课程名称"},domProps:{value:e.searchInfo},on:{input:function(t){t.target.composing||(e.searchInfo=t.target.value)}}}),e._v(" "),n("button",{staticClass:"search-btn",attrs:{id:"search-btn"},on:{click:function(t){e.goGoodsListPage(e.searchInfo)},keyup:function(t){if(!("button"in t)&&13!==t.keyCode)return null;e.goGoodsListPage(e.searchInfo)}}},[n("span",{staticClass:"glyphicon glyphicon glyphicon-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),n("ul",{staticClass:"search-list"},e._l(e.hotSearchData,function(t){return n("li",{key:t,staticClass:"search-item"},[n("a",{staticClass:"link hightlight",attrs:{href:"javascript:void(0)"},on:{click:function(n){e.goGoodsListPage(t,"")}}},[e._v(e._s(t))])])}))]),e._v(" "),n("div",{staticClass:"shop"},[n("img",{staticClass:"img",attrs:{src:"http://oss.lshao.cn/images/Cart.png",alt:""}}),e._v(" "),n("span",{staticClass:"font link",on:{click:function(t){t.preventDefault(),e.loadPage("user-cart")}}},[e._v(" 购物车")]),n("span",{staticClass:"hightlight"},[e._v("(0)")])]),e._v(" "),n("div",{staticClass:"download"},[n("span",{staticClass:"button link",on:{click:function(t){t.preventDefault(),e.loadPage("download")}}},[e._v("客户端下载")])])])])],1)},J=[],z={render:F,staticRenderFns:J},W=z,X=n("VU/8"),Q=o,V=X(G,W,!1,Q,null,null),Y=V.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer"},[n("div",{staticClass:"top"},[n("div",{staticClass:"top w"},[n("img",{staticClass:"link",attrs:{src:"http://oss.lshao.cn/images/Logo.png",alt:""},on:{click:function(t){return t.preventDefault(),e.goHome(t)}}}),e._v(" "),n("div",{staticClass:"w1"},[n("p",{staticClass:"f-title"},[e._v("如何购买")]),e._v(" "),n("ul",{staticClass:"f-table"},[n("li",{staticClass:"item link",on:{click:function(t){t.preventDefault(),e.loadPage("register")}}},[e._v("新用户注册")]),e._v(" "),n("li",{staticClass:"item link",on:{click:function(t){t.preventDefault(),e.loadPage("payonline")}}},[e._v("在线支付")]),e._v(" "),n("li",{staticClass:"item link",on:{click:function(t){t.preventDefault(),e.loadPage("invoice")}}},[e._v("开具发票")])])]),e._v(" "),n("div",{staticClass:"w2"},[n("p",{staticClass:"f-title"},[e._v("商家入驻")]),e._v(" "),n("ul",{staticClass:"f-table"},[n("li",{staticClass:"item link"},[e._v("老师入驻")]),e._v(" "),n("li",{staticClass:"item link"},[e._v("机构入驻")]),e._v(" "),n("li",{staticClass:"item link",on:{click:function(t){t.preventDefault(),e.loadPage("business")}}},[e._v("商务合作")])])]),e._v(" "),n("div",{staticClass:"w3"},[n("p",{staticClass:"f-title"},[e._v("新手上路")]),e._v(" "),n("ul",{staticClass:"f-table"},[n("li",{staticClass:"item link",on:{click:function(t){t.preventDefault(),e.loadPage("question")}}},[e._v("常见问题")]),e._v(" "),n("li",{staticClass:"item link",on:{click:function(t){t.preventDefault(),e.loadPage("howtostudy")}}},[e._v("如何上课")])])]),e._v(" "),n("div",{staticClass:"w4"},[n("p",{staticClass:"f-title"},[e._v("售后服务")]),e._v(" "),n("ul",{staticClass:"f-table"},[n("li",{staticClass:"item",staticStyle:{color:"#999"}},[e._v("服务时间：9:00 - 20:00")]),e._v(" "),e._m(0),e._v(" "),n("li",{staticClass:"item link",on:{click:function(t){t.preventDefault(),e.loadPage("refund")}}},[e._v("退换课须知")])])]),e._v(" "),n("img",{staticClass:"f-img link",attrs:{src:"http://oss.lshao.cn/images/download.png",alt:""},on:{click:function(t){t.preventDefault(),e.loadPage("download")}}}),e._v(" "),n("p",{staticClass:"f-title-2 link",on:{click:function(t){t.preventDefault(),e.loadPage("download")}}},[e._v("官方客户端下载")])])]),e._v(" "),n("div",{staticClass:"bottom"},[n("div",{staticClass:"w"},[n("p",{staticClass:"copyright"},[n("a",{staticClass:"link",attrs:{href:"javascript:void(0)"},on:{click:function(t){t.preventDefault(),e.loadPage("about")}}},[e._v("关于我们")]),e._v("  |  \n        "),n("a",{staticClass:"link",attrs:{href:"javascript:void(0)"},on:{click:function(t){t.preventDefault(),e.loadPage("privacy")}}},[e._v("隐私政策")]),e._v("   |  \n        "),e._v(" "),n("a",{staticClass:"link",attrs:{href:"javascript:void(0)"},on:{click:function(t){t.preventDefault(),e.loadPage("disclaimer")}}},[e._v("免责声明")])]),e._v(" "),n("p",{staticClass:"copyright"},[e._v("Copyright © 2019 All Right Reserved 北京道明科技有限公司 版权所有   |  京ICP备14046643号")])])])])},ee=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"item"},[n("a",{staticClass:"link",attrs:{href:"tel:010-52262815"}},[e._v("服务电话：010 - 52262815")])])}],te={render:Z,staticRenderFns:ee},ne=te,ae=n("VU/8"),oe=i,ie=ae(null,ne,!1,oe,null,null),re=ie.exports,ce={data:function(){return{routerShow:!1}},components:{pcHeader:Y,pcFooter:re},watch:{$route:"rs"},methods:{rs:function(){this.routerShow=!this.$route.meta.hideMainHeader},_isMobile:function(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}},mounted:function(){this._isMobile()}},se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("pc-header",{directives:[{name:"show",rawName:"v-show",value:e.routerShow,expression:"routerShow"}]}),e._v(" "),n("router-view",{}),e._v(" "),n("pc-footer")],1)},ue=[],le={render:se,staticRenderFns:ue},de=le,he=n("VU/8"),pe=r,fe=he(ce,de,!1,pe,null,null),me=fe.exports,ve=[{path:"/",redirect:{name:"Index"},component:function(e){return n.e(25).then(function(){var t=[n("8hXn")];e.apply(null,t)}.bind(this)).catch(n.oe)},children:[{name:"Index",path:"index",meta:{hideMainHeader:!1},component:function(e){return Promise.all([n.e(0),n.e(1)]).then(function(){var t=[n("KR8f")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"user-cart",path:"cart",meta:{name:"我的购物车",requestAuth:!1,hideMainHeader:!1},component:function(e){return n.e(3).then(function(){var t=[n("9Svc")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"order-confirm",path:"confirm",meta:{name:"订单确认",requestAuth:!0,hideMainHeader:!1},component:function(e){return Promise.all([n.e(0),n.e(4)]).then(function(){var t=[n("PTCF")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"order-payment",path:"payment",meta:{name:"支付订单",requestAuth:!0,hideMainHeader:!1},component:function(e){return n.e(23).then(function(){var t=[n("sm47")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"goods-detail",path:"detail",meta:{name:"商品详情",requestAuth:!1,hideMainHeader:!1},component:function(e){return Promise.all([n.e(0),n.e(17)]).then(function(){var t=[n("o4S0")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"goods-list",path:"list",meta:{name:"商品列表",requestAuth:!1,hideMainHeader:!1},component:function(e){return n.e(5).then(function(){var t=[n("BPOT")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"order-detail",path:"orderDetail",meta:{name:"订单详情",requestAuth:!0,hideMainHeader:!1},component:function(e){return Promise.all([n.e(0),n.e(14)]).then(function(){var t=[n("0or0")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"oper-result",path:"result",meta:{name:"操作结果",hideMainHeader:!0},component:function(e){return n.e(18).then(function(){var t=[n("4sCl")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"user-center",path:"center",meta:{name:"个人中心",requestAuth:!0,hideMainHeader:!1},component:function(e){return Promise.all([n.e(0),n.e(19)]).then(function(){var t=[n("d92S")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"user-center-update",path:"updateUser",meta:{name:"修改个人信息",requestAuth:!0,hideMainHeader:!1},component:function(e){return Promise.all([n.e(0),n.e(21)]).then(function(){var t=[n("U55/")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"user-order",path:"order",meta:{name:"我的订单",requestAuth:!0,hideMainHeader:!1},component:function(e){return Promise.all([n.e(0),n.e(20)]).then(function(){var t=[n("wPiu")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"user-pass-update",path:"updateUserPwd",meta:{name:"修改密码",requestAuth:!0,hideMainHeader:!1},component:function(e){return Promise.all([n.e(0),n.e(24)]).then(function(){var t=[n("mX2j")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"about",path:"aboutMe",meta:{name:"关于老师好在线",hideMainHeader:!1},component:function(e){return n.e(12).then(function(){var t=[n("oF1k")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"question",path:"question",meta:{name:"常见问题",hideMainHeader:!1},component:function(e){return n.e(10).then(function(){var t=[n("eZu+")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"register",path:"register",meta:{name:"新用户注册",hideMainHeader:!1},component:function(e){return n.e(16).then(function(){var t=[n("gZ96")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"payonline",path:"payonline",meta:{name:"在线支付",hideMainHeader:!1},component:function(e){return n.e(6).then(function(){var t=[n("laRq")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"invoice",path:"invoice",meta:{name:"开具发票",hideMainHeader:!1},component:function(e){return n.e(8).then(function(){var t=[n("StUN")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"howtostudy",path:"howtostudy",meta:{name:"如何上课",hideMainHeader:!1},component:function(e){return n.e(11).then(function(){var t=[n("jRal")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"business",path:"business",meta:{name:"商务合作",hideMainHeader:!1},component:function(e){return n.e(9).then(function(){var t=[n("idEK")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"refund",path:"refund",meta:{name:"退换课规则",hideMainHeader:!1},component:function(e){return n.e(7).then(function(){var t=[n("jOWO")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"download",path:"download",meta:{name:"客户端下载",hideMainHeader:!1},component:function(e){return Promise.all([n.e(0),n.e(2)]).then(function(){var t=[n("0PJW")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"zhaomu",path:"zhaomu",meta:{name:"入驻流程",hideMainHeader:!0},component:function(e){return n.e(13).then(function(){var t=[n("bN2w")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"privacy",path:"about/privacy",meta:{name:"隐私政策",hideMainHeader:!1},component:function(e){return n.e(22).then(function(){var t=[n("GS9Z")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{name:"disclaimer",path:"about/disclaimer",meta:{name:"免责声明",hideMainHeader:!1},component:function(e){return n.e(15).then(function(){var t=[n("rtTP")];e.apply(null,t)}.bind(this)).catch(n.oe)}}]},{name:"error",path:"*",redirect:{name:"404"},component:function(e){return n.e(26).then(function(){var t=[n("34W9")];e.apply(null,t)}.bind(this)).catch(n.oe)}}],_e=n("/ocq"),ge=n("mtWM"),ke=n.n(ge),Ee=n("NYxO"),Te=n("woOf"),Ce=n.n(Te),ye="/uac/auth/user/refreshToken",Re=n("pFYg"),Se=n.n(Re),Ue=n("Zrlr"),Pe=n.n(Ue),Ae=n("wxAW"),Ne=n.n(Ae),Ie=n("iOyh"),be=n("RRJN"),Me=n.n(be);Me.a.prefix=Ie.b.lockr_prefix;var Le=function(){function e(){Pe()(this,e),this.pcPrefix=Ie.b.lockr_prefix,this.secretKey=Ie.b.secret_key}return Ne()(e,[{key:"set",value:function(t,n,a){e.checkKey(t),Me.a.set(t,n),a&&a()}},{key:"get",value:function(t){return e.checkKey(t),Me.a.get(t)}},{key:"delete",value:function(t,n){e.checkKey(t),Me.a.rm(this.pcPrefix+t),n&&n()}},{key:"add",value:function(t,n,a){e.checkKey(t),Me.a.sadd(t,n),a&&a()}},{key:"getList",value:function(t){return e.checkKey(t),Me.a.smembers(t)}},{key:"contains",value:function(t,n,a){return e.checkKey(t),Me.a.sismember(t,n)}},{key:"remove",value:function(t,n,a){e.checkKey(t),Me.a.srem(t,n),a&&a()}},{key:"removeAll",value:function(t,n){e.checkKey(t);var a=Me.a.smembers(t);for(var o in a)Me.a.srem(t,a[o]);n&&n()}},{key:"clear",value:function(e){Me.a.flush(),e&&e()}}],[{key:"checkKey",value:function(e){if(!e)throw new Error("没有找到key。");if("object"===(void 0===e?"undefined":Se()(e)))throw new Error("key不能是一个对象。")}}]),e}(),we=new Le,Oe=n("Av7u"),He=n.n(Oe),xe=function(){function e(){Pe()(this,e),this.secretKey=Ie.b.secret_key}return Ne()(e,[{key:"encrypt",value:function(e,t){return t||(t=this.secretKey),He.a.AES.encrypt(e,t).toString()}},{key:"decrypt",value:function(e,t){var n="";t||(t=this.secretKey);try{n=He.a.AES.decrypt(e.toString(),t||this.secretKey)}catch(e){console.info("PcEncrypt.decrypt",e)}return n.toString(He.a.enc.Utf8)}},{key:"aesEncrypt",value:function(e,t,n){var a=He.a.enc.Utf8.parse(e),o=He.a.enc.Utf8.parse(t),i=He.a.enc.Utf8.parse(n),r=He.a.AES.encrypt(a,o,{iv:i,mode:He.a.mode.CBC,padding:He.a.pad.Iso10126});return He.a.enc.Base64.stringify(r.ciphertext)}},{key:"aesDecrypt",value:function(e,t,n){var a=He.a.enc.Utf8.parse(t),o=He.a.enc.Utf8.parse(n);return He.a.AES.decrypt(e,a,{iv:o,mode:He.a.mode.CBC,padding:He.a.pad.Iso10126}).toString(He.a.enc.Utf8)}}]),e}(),De=new xe,qe=n("lbHh"),Ke=n.n(qe),$e=function(){function e(){Pe()(this,e),this.pcPrefix=Ie.b.cookie_prefix,this.secretKey=Ie.b.secret_key,this.domain=Ie.b.domain,this.expireTime=30}return Ne()(e,[{key:"set",value:function(t){var n=t.key,a=t.value,o=t.expires,i=t.path,r=t.success;e.checkKey(n),n=this.pcPrefix+n,Ke.a.set(n,a,{expires:o||this.expireTime,path:i||"/",domain:this.domain}),r&&r()}},{key:"get",value:function(t){return e.checkKey(t),Ke.a.get(this.pcPrefix+t)}},{key:"delete",value:function(t){var n=t.key,a=t.path,o=t.success;e.checkKey(n),Ke.a.remove(this.pcPrefix+n,{path:a||"/",domain:this.domain}),o&&o()}},{key:"geteAll",value:function(){Ke.a.get()}}],[{key:"checkKey",value:function(e){if(!e)throw new Error("没有找到key。");if("object"===(void 0===e?"undefined":Se()(e)))throw new Error("key不能是一个对象。")}}]),e}(),Be=new $e;ke.a.interceptors.request.use(function(e){return ot.dispatch("get_access_token",function(t){t&&(e.headers.Authorization="Bearer "+t)}),e},function(e){return p.a.reject(e)});var je,Ge={loginName:"",rememberMe:"",menuList:[],authToken:{access_token:"",expires_in:"",timestamp:""},refreshToken:{refresh_token:""}},Fe={getLoginName:function(e){return e.authToken&&""!==e.authToken.access_token||(e.authToken=Be.get(Ie.a.USER.AUTH_TOKEN)?JSON.parse(Be.get(Ie.a.USER.AUTH_TOKEN)):{}),e.authToken&&(new Date).getTime()-e.authToken.timestamp>72e5?"":e.authToken.loginName},getMenuList:function(e){return e.menuList&&0!==e.menuList.length||(e.menuList=we.get(Ie.a.USER.MENU_LIST)),e.menuList},getRememberMe:function(e){return e.rememberMe||(e.rememberMe=!!Be.get(Ie.a.USER.REMEMBER_ME)),e.rememberMe},getRefreshToken:function(e){return e.refreshToken.refresh_token||(e.refreshToken=Be.get(Ie.a.USER.REFRESH_TOKEN)?JSON.parse(Be.get(Ie.a.USER.REFRESH_TOKEN)):{},console.log("state.refreshToken")),e.refreshToken.refresh_token},getAccessToken:function(e){return e.authToken||(e.authToken=Be.get(Ie.a.USER.AUTH_TOKEN)?JSON.parse(Be.get(Ie.a.USER.AUTH_TOKEN)):{}),e.authToken.access_token},getAuthToken:function(e){return e.authToken&&""!==e.authToken.access_token||(e.authToken=Be.get(Ie.a.USER.AUTH_TOKEN)?JSON.parse(Be.get(Ie.a.USER.AUTH_TOKEN)):{}),e.authToken},getPlatformIsMobile:function(e){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}},Je={updateRememberMe:function(e){e.rememberMe=!e.rememberMe,e.rememberMe?Be.set({key:Ie.a.USER.REMEMBER_ME,value:e.rememberMe}):Be.delete({key:Ie.a.USER.REMEMBER_ME})},updateUserInfo:function(e,t){e.loginName=t,Be.set({key:Ie.a.USER.LOGIN_NAME,value:t})},updateUserMenu:function(e,t){e.menuList=t,we.set(Ie.a.USER.MENU_LIST,t)},updateAuthToken:function(e,t){"string"==typeof t&&(t=JSON.parse(t)),console.log("更新token : updateAuthToken"),e.authToken=t;var n=2/24;!!Be.get(Ie.a.USER.REMEMBER_ME)&&(n=7),delete t.jti,delete t.token_type;var a=Be.get(Ie.a.USER.REFRESH_TOKEN)?JSON.parse(Be.get(Ie.a.USER.REFRESH_TOKEN)):{};a||Ce()(a,t),console.log("authToken"),delete t.refresh_token,delete a.access_token,e.refreshToken=a,console.info("token:",t),Be.set({key:Ie.a.USER.AUTH_TOKEN,value:t,expires:n}),Be.set({key:Ie.a.USER.REFRESH_TOKEN,value:a,expires:n})},deleteUserInfo:function(e){Be.delete({key:Ie.a.USER.LOGIN_NAME}),e.loginName="",Be.delete({key:Ie.a.USER.REMEMBER_ME}),e.rememberMe=!1},deleteAuthToken:function(e){Be.delete({key:Ie.a.USER.AUTH_TOKEN}),e.authToken={}},deleteMenuList:function(e){we.delete(Ie.a.USER.MENU_LIST),e.menuList={}},deleteRememberMe:function(e){we.delete(Ie.a.USER.REMEMBER_ME),e.rememberMe=""}},ze={get_access_token:function(e,t){var n=e.commit;Ge.authToken&&""!==Ge.authToken.access_token||(Ge.authToken=Be.get(Ie.a.USER.AUTH_TOKEN)?JSON.parse(Be.get(Ie.a.USER.AUTH_TOKEN)):{}),Ge.authToken&&(new Date).getTime()-Ge.authToken.timestamp>54e5&&c().then(function(e){200===e.data.code?(n("updateAuthToken",e.data.result),console.log(e)):(n("deleteUserInfo"),n("deleteAuthToken"),n("deleteMenuList"),n("deleteRememberMe"),s()),console.log("判断是否需要续租")}),t&&t(Ge.authToken.access_token)},update_remember_me:function(e){(0,e.commit)("updateRememberMe")},update_user_info:function(e,t){(0,e.commit)("updateUserInfo",t)},update_user_menu:function(e,t){(0,e.commit)("updateUserMenu",t)},delete_user_info:function(e){var t=e.commit;t("deleteUserInfo"),t("deleteAuthToken"),t("deleteMenuList"),t("deleteRememberMe")},update_auth_token:function(e,t){(0,e.commit)("updateAuthToken",t)}},We={state:Ge,getters:Fe,actions:ze,mutations:Je},Xe={cartList:we.get(Ie.a.CART.SHOPPING_CART)?JSON.parse(we.get(Ie.a.CART.SHOPPING_CART)):[],cartInfo:{totalPrice:0,totalNum:0},curIndex:-1},Qe=n("bOdI"),Ve=n.n(Qe),Ye=n("mvHQ"),Ze=n.n(Ye);ke.a.interceptors.request.use(function(e){var t=Be.get(Ie.a.USER.AUTH_TOKEN);return e.headers.Authorization="Bearer "+t,e},function(e){return p.a.reject(e)}),ke.a.defaults.baseURL="http://api.lshao.cn/",ke.a.interceptors.response.use(function(e){if(200!==e.data.code&&500!==e.data.code){if(100009===e.data.code||100010===e.data.code||100006===e.data.code)return window.location.href="/",p.a.reject(e)}else if(e.data)return e.data},function(e){e.response?(console.error("error: ",e.response),500===e.response.status?alert(e.response.data.message):504===e.response.status?alert("网关错误"):(console.log("Error",e.message),alert("接口请求失败或超时！请刷新重试"))):alert("接口请求失败或超时！请刷新重试")});var et=(je={},Ve()(je,"CLEAR_CART",function(e){e.cartList=[],we.delete(Ie.a.CART.SHOPPING_CART)}),Ve()(je,"UPDATE_CART",function(e){we.set(Ie.a.CART.SHOPPING_CART,Ze()(e.cartList))}),Ve()(je,"SET_CART_LIST",function(e,t){console.info("SET_CART_LIST",t),e.cartList=t}),Ve()(je,"UPDATE_CUR_INDEX",function(e,t){var n=t.index,a=void 0===n?-1:n;e.curIndex=a}),Ve()(je,"DELETE_PRODUCT",function(e){if(e.curIndex>=0){var t=e.cartList[e.curIndex];e.cartList[e.curIndex].quantity=0,e.cartList.splice(e.curIndex,1),Be.get(Ie.a.USER.LOGIN_NAME)&&ke.a.post("/uac/cart/deleteProduct/"+t.productId)}}),Ve()(je,"PUSH_PRODUCT",function(e,t){e.cartList.push(t),ot.getters.getLoginName&&ke.a.post("/uac/cart/addProduct/"+t.productId+"/"+t.quantity)}),Ve()(je,"PLUS_COUNT",function(e){if(e.cartList[e.curIndex].quantity=parseInt(e.cartList[e.curIndex].quantity),e.cartList[e.curIndex].quantity++,ot.getters.getLoginName){var t=e.cartList[e.curIndex];ke.a.post("/uac/cart/updateProduct/"+t.productId+"/"+e.cartList[e.curIndex].quantity)}}),Ve()(je,"MINUS_COUNT",function(e){if(e.cartList[e.curIndex].quantity=parseInt(e.cartList[e.curIndex].quantity),e.cartList[e.curIndex].quantity--,ot.getters.getLoginName){var t=e.cartList[e.curIndex];console.info("state.cartList[state.curIndex].quantity",e.cartList[e.curIndex].quantity),ke.a.post("/uac/cart/updateProduct/"+t.productId+"/"+e.cartList[e.curIndex].quantity)}0===e.cartList[e.curIndex].quantity&&e.cartList.splice(e.curIndex,1)}),Ve()(je,"CHECK_PRODUCT",function(e,t){var n=t.productId;e.curIndex=-1;var a=e.cartList;if(a&&a.length>0)for(var o=0;o<a.length;o++)if(a[o].productId===n){e.curIndex=o;break}}),Ve()(je,"SELECT_PRODUCT",function(e,t){var n=t.productId;console.info("选中",e,n),e.cartList[e.curIndex].checked=1,Be.get(Ie.a.USER.LOGIN_NAME)&&ke.a.post("/uac/cart/selectProduct/"+n)}),Ve()(je,"UN_SELECT_PRODUCT",function(e,t){var n=t.productId;console.info("取消选中",e,n),e.cartList[e.curIndex].checked=0,Be.get(Ie.a.USER.LOGIN_NAME)&&ke.a.post("/uac/cart/unSelectProduct/"+n)}),Ve()(je,"SELECT_ALL_PRODUCT",function(e){for(var t in e.cartList)e.cartList[t].checked=1;Be.get(Ie.a.USER.LOGIN_NAME)&&ke.a.post("/uac/cart/selectAllProduct/")}),Ve()(je,"UN_SELECT_ALL_PRODUCT",function(e){for(var t in e.cartList)e.cartList[t].checked=0;Be.get(Ie.a.USER.LOGIN_NAME)&&ke.a.post("/uac/cart/unSelectAllProduct/")}),je),tt={getCartInfo:function(e){e.cartInfo.totalPrice=0,e.cartInfo.totalNum=0;for(var t=e.cartList,n=0;n<t.length;n++){var a=t[n];if(1===a.checked||!0===a.checked){var o=parseInt(a.productPrice);e.cartInfo.totalPrice+=1*o,e.cartInfo.totalNum+=1}}return e.cartInfo},getCartList:function(e){return e.cartList&&0===e.cartList.length&&(e.cartList=Be.get(Ie.a.CART.SHOPPING_CART)?JSON.parse(Be.get(Ie.a.CART.SHOPPING_CART)):[]),e.cartList},getCurIndex:function(e){return e.curIndex}},nt={clear_cart:function(e){(0,e.commit)("CLEAR_CART")},update_cart:function(e){(0,e.commit)("UPDATE_CART")},update_cur_index:function(e,t){(0,e.commit)("UPDATE_CUR_INDEX",t)},delete_product:function(e){var t=e.commit;t("DELETE_PRODUCT"),t("UPDATE_CART")},push_cart:function(e,t){var n=e.commit,a=t.userCart;a&&(n("PUSH_PRODUCT",a),n("UPDATE_CART"))},plus_count:function(e){var t=e.commit;t("PLUS_COUNT"),t("UPDATE_CART")},minus_count:function(e){var t=e.commit;t("MINUS_COUNT"),t("UPDATE_CART")},check_product:function(e,t){(0,e.commit)("CHECK_PRODUCT",t)},set_cart_list:function(e,t){var n=e.commit;n("SET_CART_LIST",t),n("UPDATE_CART")},select_product:function(e,t){var n=e.commit;n("SELECT_PRODUCT",t),n("UPDATE_CART")},un_select_product:function(e,t){var n=e.commit;n("UN_SELECT_PRODUCT",t),n("UPDATE_CART")},select_all_product:function(e,t){var n=e.commit;n("SELECT_ALL_PRODUCT",t),n("UPDATE_CART")},un_select_all_product:function(e,t){var n=e.commit;n("UN_SELECT_ALL_PRODUCT",t),n("UPDATE_CART")}},at={state:Xe,mutations:et,getters:tt,actions:nt};w.default.use(Ee.a),w.default.prototype.$http=ke.a.create({timeout:6e4});var ot=new Ee.a.Store({modules:{user:We,cart:at}}),it=n("cTzj"),rt=n.n(it),ct=n("bqTm"),st=n.n(ct),ut=n("Y81h"),lt=n.n(ut),dt=(n("UVIz"),n("5W1q"),{data:function(){return{}},methods:{getUrlParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return n?decodeURIComponent(n[2]):null},loadPage:function(e,t){t?this.$router.push({name:e,query:t}):this.$router.push({name:e})},successTips:function(e){alert(e||"操作成功！")},errorTips:function(e){alert(e||"哪里不对了~")},goBack:function(){this.$router.go(-1)},goHome:function(){this.loadPage("Index")},goSignIn:function(){console.log("goSignIn production"),window.location.href="http://login.lshao.cn"},goSignUp:function(){window.location.href="http://login.lshao.cn/register"},ajax:function(e){var t=this,n=e.type,a=e.url,o=e.data,i=e.success;e.isUnMusk||this.$pcNProgress.start(),this.$http({method:n||"POST",url:a||"",data:o||""}).then(function(e){t.$pcNProgress.done(),i?i(e):t.goBack()}).catch(function(e){t.$pcNProgress.done(),t.$loading=!1,console.error(e)})},logout:function(){var e=this;this.$http({url:"/uac/user/logout",method:"post",params:{accessToken:this.$store.getters.getAccessToken}}).then(function(){e.$store.dispatch("delete_user_info"),e.$store.dispatch("clear_cart"),e.goHome()}).catch(function(){e.$store.dispatch("delete_user_info"),e.$store.dispatch("clear_cart"),e.goHome()})},validate:function(e,t){return"require"===t?!!e:"phone"===t?/^1\d{10}$/.test(e):"email"===t?/^(\w)+(\.\w+)*@(\w)+((\.\w{2,3}){1,3})$/.test(e):void 0}}}),ht=dt,pt=new w.default,ft=n("Q0Ca"),mt=n.n(ft);[L.a,b.a,N.a,P.a,S.a,y.a,T.a,k.a].map(function(e){w.default.component(e.name,e)}),w.default.prototype.$pcMessageBox=_.a,w.default.prototype.$pcMessage=m.a,w.default.prototype.$confirm=_.a.confirm,w.default.use(st.a),w.default.use(Ee.a),w.default.mixin(ht),w.default.use(_e.a),w.default.use(rt.a,{loading:"static/loading-svg/loading-spinning-bubbles.svg",try:3});var vt=new _e.a({mode:"history",root:"/",routes:ve});w.default.prototype.$http=ke.a.create({timeout:6e4}),w.default.prototype.$pcBus=pt,w.default.prototype.$pcEnum=Ie.a,w.default.prototype.$pcNProgress=lt.a,w.default.prototype.$pcEncrypt=De,w.default.prototype.$http.defaults.baseURL="http://api.lshao.cn/",w.default.prototype.$http.interceptors.request.use(function(e){return!e.url.indexOf("/auth")>=0&&ot.dispatch("get_access_token",function(t){t&&(e.headers.Authorization="Bearer "+t)}),e},function(e){return p.a.reject(e)}),w.default.prototype.$http.interceptors.response.use(function(e){return 200===e.data.code&&e.data?e.data:10031001===e.data.code?e.data:10011039===e.data.code||10011040===e.data.code||10011041===e.data.code?p.a.reject(e):(alert("res.data.message"),alert(e.data.message),p.a.reject(e))},function(e){e.response&&(console.error("error: ",e.response),500===e.response.status?alert(e.response.data.message):401===e.response.status||console.log("Error",e.message))}),vt.beforeEach(function(e,t,n){console.log("router.beforeEach"),ot.dispatch("get_access_token",function(e){}),lt.a.start(),Be.set({key:Ie.a.USER.REDIRECT_URI,value:window.location.href}),u(),e.meta.requestAuth?ot.dispatch("get_access_token",function(e){e?n():window.location.href="http://login.lshao.cn/login"}):n()}),vt.afterEach(function(e){lt.a.done()}),d()(mt.a).forEach(function(e){return w.default.filter(e,mt.a[e])}),w.default.config.productionTip=!1,new w.default({el:"#app",router:vt,store:ot,template:"<App/>",components:{App:me}})},Oqem:function(e,t){},Q0Ca:function(e,t){t.formatMoney=function(e){if(e)return e=Number(e),"￥ "+e.toFixed(2)},t.getOrderStatusName=function(e){var t="";switch(e){case 0:t="已取消";break;case 10:t="未付款";break;case 20:t="已付款";break;case 40:t="交易成功";break;case"50":t="交易关闭";break;case"60":t="已发货"}return t}},UVIz:function(e,t){},"X+ky":function(e,t){},Yq4J:function(e,t){},cwe7:function(e,t){},d7TW:function(e,t){},iOyh:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var a={host:"http://lshao.cn",lockr_prefix:"LAOSHIHAO_",cookie_prefix:"LAOSHIHAO_",secret_key:"^#rwd6Ffz$X5alRN",domain:".lshao.cn",secret:{key_str:"om8q6fq#A0Yl@qJy",iv_str:"0#86gzOcsv1bXyIx"}};a.domain=".lshao.cn";var o={USER:{LOGIN_NAME:"LOGIN_NAME",MENU_LIST:"MENU_LIST",AUTH_TOKEN:"AUTH_TOKEN",REMEMBER_ME:"REMEMBER_ME",REFRESH_TOKEN:"REFRESH_TOKEN",REDIRECT_URI:"REDIRECT_URI"},CART:{LOGIN_NAME:"LOGIN_NAME",AUTH_TOKEN:"AUTH_TOKEN",SHOPPING_CART:"SHOPPING_CART"}}},jAzQ:function(e,t){},jZDA:function(e,t){},oq7i:function(e,t){},qunJ:function(e,t){},vxhC:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.573a1e7e1a0fc540e398.js.map